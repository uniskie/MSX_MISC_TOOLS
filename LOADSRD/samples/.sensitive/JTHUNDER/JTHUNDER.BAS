10 CLEAR 200,&HB000:DEFINT A-Z
20 DIM P(255),X(3,8),Y(3,8),A(3),W(3),AP(3,9),AF(3)
30 F$="JTHUNDER.SC7"
40 '
50 E$=LEFT$(RIGHT$(F$,3),2)
60 SR=(E$="SR")OR(E$="sr")'OR(E$="Sr")OR(E$="sR")
70 '
80 COLOR 15,0,0:VDP(9)=VDP(9)AND253
90 SCREEN7:DEFUSR=&H156
100 BLOAD"LOADSRD.BOF":DEFUSR1=&HD000:DEFUSR2=&HD003:DEFUSR3=&HD006
110 '
120 IF SR THEN COPY F$+".PL7" TO P
130 PN=0:GOSUB 790
140 SCREEN,3:BLOAD"TIME.SPR",S,&H7800
150 SETPAGE0,1:A$=USR1(F$+".SR7"):SETPAGE0,0
160 IF SR=0 THEN SETPAGE,1:COLOR=RESTORE:SETPAGE,0
170 '
180 'Ä¹² É Ë®³¼Þ
190 CX=128:CY=1
200 FOR I=0 TO 7:PUTSPRITE I,(CX+I*16,CY),7,15:COLORSPRITE$(I)=STRING$(4,5)+STRING$(4,6):NEXT
210 '
220 'µÔ¼Þ É Ë®³¼Þ
230 KX=38:KY=112
240 PUTSPRITE 9,(KX+128,KY),13,12
250 PUTSPRITE 8,(KX+128,KY),7,13
260 PUTSPRITE 31,(KX,KY+2),15,14
270 O1=52:O2=48:MF=56
280 ONINTERVAL=30 GOSUB 680:GOSUB 680
290 '
300 'ÎÝÀ² Ë®³¼Þ
310 OX=0:OY=0:SX=0:SY=0:EX=511:EY=211
320 COPY (SX,SY)-(EX,EY),1 TO (OX,OY),0
330 GETTIME T$:EF=-(VAL(MID$(T$,5,1))AND1)
340 'VDP(26)=2
350 '
360 'MAIN LOOP
370 'VS=(VS-1)AND255:VDP(27)=VS\8:VDP(28)=255-VS
380 I$=INKEY$:A=USR(0)
390 IF I$=" " THEN GOSUB 750
400 IF I$<>CHR$(13) THEN 420
410 O1=60+(O1=60)*8:O2=60+(O2=60)*12:VPOKE -1502,O1:VPOKE -1498,O2
420 IF I$<>CHR$(11) THEN 440
430 MF=60+(MF=60)*4:VPOKE -1410,MF
440 ' (ANIMATION)
450 VPOKE -1412,KY+TF+TF+2
460 VPOKE -1504,KY+TF+TF
470 VPOKE -1500,KY+TF+TF
480 EB=EF
490 GET TIME T$
500 EF=-(VAL(MID$(T$,5,1))AND1)
510 IF (EB<>EF) AND EF THEN GOSUB750 'ÊßÚ¯Ä +1
520 'A=3:GOSUB 1300
530 GOTO 360
540 '-------MAIN END
550 F
560 ' COPY
570 COPY (X(A,P+1),Y(A,P+1))-STEP(X(A,0),Y(A,0)),1 TO (X(A,1)+OX,Y(A,1)+OY),0
580 RETURN
590 'EYES
600 IF W(A) AND (EF=EB) THEN W(A)=W(A)-1:RETURN
610 P=AP(A,A(A)+1+EF)
620 GOSUB 570
630 A(A)=A(A)+1
640 IF A(A)<(5-EF) THEN 660
650 A(A)=0:W(A)=RND(3)*(10-EF*16)
660 RETURN
670 '
680 'TIMER
690 INTERVAL OFF
700 U=USR3(0) 'TIME SPRITE
710 TF=(TF+1)AND3
720 INTERVAL ON
730 RETURN
740 '
750 'PALETTE +1
760 PN=(PN+1)AND7
770 GOTO 790
780 '
790 'PALETTE (PN=PALETTE NO)
800 IF SR=0 THEN RETURN
810 PJ=PN*16:U=USR2(VARPTR(P(PJ)))
820 RETURN
