10 CLEAR 400,&HD000:DEFINT A-Z
20 DIM AD(9)
30 BLOAD"IOTCMD.BIN"
40 AD=&HD000:FOR I=0 TO 9:AD(I)=AD+I*3:NEXT I
50 DEFUSR0=AD(0) 'set_xbasic
60 DEFUSR1=AD(1) 'iot_node
70 DEFUSR2=AD(2) 'iot_put_i
80 DEFUSR3=AD(3) 'iot_put_s
90 DEFUSR4=AD(4) 'iot_get_i
100 DEFUSR5=AD(5) 'iot_get_s
110 DEFUSR6=AD(6) 'iot_find_i
120 DEFUSR7=AD(7) 'iot_find_s
130 DEFUSR8=AD(8) 'iot_read_i
140 DEFUSR9=AD(9) 'iot_read_s
150 _TURBO ON(AD())
160 IF 1E-40=0 THEN A=USR(1):PRINT"TURBO"
170 '対象ノードを指定
180 ND$="device/i2c_i"
190 A=USR1(VARPTR(ND$)) 'IOT_NODE
200 PRINT "SET NODE:";ND$;" - ";
210 IF A THEN PRINT"ERROR:";A ELSE PRINT"OK"
220 'サブノードの数を取得
230 CN=USR6(0) ' IOT_FIND_I
240 PRINT "FIND_I=";CN
250 '1つ目
260 D$=STRING$(32, 32)
270 A=USR7(VARPTR(D$))
280 PRINT"FIND_S(";A;") ";LEFT$(D$,A)
290 '2つ目以降(あれば)
300 FOR I=1 TO CN-1
310  'D$=STRING$(32, 32)
320  A=USR9(VARPTR(D$))
330  PRINT"FIND_NS(";A;") ";LEFT$(D$,A)
340 NEXT I
